---
title: "Today I Learned_230227"
date: 2023-02-27 22:21:00 +0900
categories: TIL
---

# ν† λΉ„μ μ¤ν”„λ§ 3.1

### DAOμ ν™•μ¥

- κ΄€μ‹¬μ‚¬μ— λ”°λΌ λ¶„λ¦¬ν• μ¤λΈμ νΈλ“¤μ€ κ°κΈ° λ…νΉν• λ³€ν™”μ νΉμ§•μ΄ μμ
- λ³€ν™”μ μ„±κ²©μ΄ λ‹¤λ¥΄λ‹¤λ” κ²ƒμ€ λ³€ν™”μ μ΄μ , μ‹κΈ°, μ£ΌκΈ°κ°€ λ‹¤λ¥΄λ‹¤λ” κ²ƒ
- λ³€ν™”μ μ„±κ²©μ΄ λ‹¤λ¥Έ κ²ƒμ„ λ¶„λ¦¬ν•΄μ„, μ„λ΅ μν–¥μ„ μ£Όμ§€ μ•μ€ μ±„λ΅ κ°κ° ν•„μ”ν• μ‹μ μ— λ…λ¦½μ μΌλ΅ λ³€κ²½ν•  μ μλ„λ΅ ν•΄μ•Ό ν•¨

### ν΄λμ¤μ λ¶„λ¦¬

- κ΄€μ‹¬μ‚¬κ°€ λ‹¤λ¥Έ κ²ƒλ“¤μ„ λ…λ¦½μ μΈ ν΄λμ¤λ΅ λ¶„λ¦¬
- λ…λ¦½ ν΄λμ¤λ΅ λ¶„λ¦¬ν•κ³  ν• ν΄λμ¤κ°€ λ‹¤λ¥Έ ν΄λμ¤λ¥Ό μ‚¬μ©ν•λ„λ΅ λ¶„λ¦¬
- μμ  : μ‚¬μ©μ μ •λ³΄λ¥Ό μ €μ¥ν•κ³  κ°€μ Έμ¤λ” λ°©λ²• / DBμ—°κ²°ν•κ³  μ»¤λ„¥μ…μ„ κ°€μ Έμ¤λ” λ°©λ²•μ„ λ¶„λ¦¬

DBμ—°κ²° λ¶„λ¦¬

```java
public class SimpleConnectionMaker {
    public Connection makeNewConnection() throws  ClassNotFoundException, SQLException {
        Class.forName("jdbc λ“λΌμ΄λ²„ μ΄λ¦„");
        Connection c = DriverManager.getConnection("jdbc url", "user", "pwd");
        return c;
    }
}
```

μ‚¬μ©μ μ •λ³΄ μ €μ¥ν•κ³  κ°€μ Έμ¤κΈ°

```java
public class UserDao {
    private SimpleConnectionMaker simpleConnectionMaker;

    public UserDao(SimpleConnectionMaker simpleConnectionMaker) {
        this.simpleConnectionMaker = new SimpleConnectionMaker();
    }

    public void add(User user) throws  ClassNotFoundException, SQLException { //μμ™Έλ” λ©”μ†λ“ λ°–μΌλ΅ λμ§€κΈ°
        Connection c = simpleConnectionMaker.makeNewConnection();
        ....
    }

    public User get(String id) throws ClassNotFoundException, SQLException {
        Connection c = simpleConnectionMaker.makeNewConnection();
        ....
    }
}
```

- SimpleConnectionMakerλ΅ λ¶„λ¦¬
- UserDaoκ°€ νΉμ • ν΄λμ¤(SimpleConnectionMaker)μ— μΆ…μ†λμ–΄ μμ–΄ μƒμ†μ„ μ‚¬μ©ν–μ„ λ• μ½”λ“ μμ • μ—†μ΄ DB μ»¤λ„¥μ… μƒμ„± κΈ°λ¥μ„ λ³€κ²½ν•  μ μ—†μ
- λ¬Έμ μ  : UserDaoκ°€ DB μ»¤λ„¥μ…μ— λ€ν• μ •λ³΄λ¥Ό λ„λ¬΄ λ§μ΄ κ°–κ³  μλ‹¤
    - κµ¬ν„μ²΄(SimpleConnectionMaker)μ— λ„λ¬΄ μμ΅΄μ μ΄λ‹¤
    - μ–΄λ–¤ ν΄λμ¤κ°€ μ“°μΌμ§€, μ–΄λ–¤ λ©”μ†λ“λ¥Ό κ°€μ§€κ³  μλ”μ§€ κµ¬μ²΄μ μΈ λ°©λ²•μ— μΆ…μ†λ¨

### μΈν„°νμ΄μ¤μ λ„μ…

- μ¶”μƒμ μΈ λμ¨ν• μ—°κ²°κ³ λ¦¬
    - λ‘ κ°μ ν΄λμ¤κ°€ μ„λ΅ κΈ΄λ°€ν•κ² μ—°κ²°λμ§€ μ•λ„λ΅
    - μ¶”μƒν™” : μ–΄λ–¤ κ²ƒλ“¤μ κ³µν†µμ μΈ μ„±κ²©μ„ λ½‘μ•„λ‚΄μ–΄ μ΄λ¥Ό λ”°λ΅ λ¶„λ¦¬ν•λ” μ‘μ—…
- μλ°”μ—μ„λ” μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ¶”μƒν™”λ¥Ό μ§„ν–‰ν•¨
- μΈν„°νμ΄μ¤μ—μ„λ” μ–΄λ–¤ μΌμ„ ν• μ§€λ§ μ •ν•΄λ†“κ³ , μ–΄λ–»κ² ν•λ”μ§€λ” κµ¬μ²΄ ν΄λμ¤λ“¤μ΄ κ²°μ •

μΈν„°νμ΄μ¤ μƒμ„±

```java
public interface ConnectionMaker {
    public Connection makeConnection() throws ClassNotFoundException, SQLException;
}
```

μΈν„°νμ΄μ¤ κµ¬ν„

```java
public class DConnectionMaker implements ConnectionMaker{

    @Override
    public Connection makeConnection() throws ClassNotFoundException, SQLException {
        //Connection μƒμ„±
    }
}
```

μΈν„°νμ΄μ¤ μ‚¬μ©ν•μ—¬ DB μ»¤λ„¥μ… κ°€μ Έμ¤κΈ°

```java
public class UserDao {
    private ConnectionMaker connectionMaker;

    public UserDao() {
        this.connectionMaker = new DConnectionMaker();
    }

    public void add(User user) throws  ClassNotFoundException, SQLException { //μμ™Έλ” λ©”μ†λ“ λ°–μΌλ΅ λμ§€κΈ°
        Connection c = connectionMaker.makeConnection();
    }

    public User get(String id) throws ClassNotFoundException, SQLException {
        Connection c = connectionMaker.makeConnection();
    }
}
```

- κ·ΈλΌμ—λ„ λ¶κµ¬ν•κ³  UserDaoμ μƒμ„±μμ—μ„ DConnectionMakerλ¥Ό μ§μ ‘ μ‚¬μ©ν•κ³  μμ
- μ»¤λ„¥μ…μ„ λ³€κ²½ν•λ ¤λ©΄ UserDaoλ¥Ό λ³€κ²½ν•΄μ•Ό ν•¨
- λ¶„λ¦¬λμ§€ μ•μ€ λλ‹¤λ¥Έ κ΄€μ‹¬μ‚¬ν•­(DConnectionMaker)μ΄ μ΅΄μ¬

### κ΄€κ³„μ„¤μ • μ±…μ„μ λ¶„λ¦¬

- UserDaoμ™€ UserDaoκ°€ μ‚¬μ©ν•  ConnectionMakerμ κµ¬ν„ ν΄λμ¤ μ‚¬μ΄μ κ΄€κ³„λ¥Ό μ„¤μ •ν•΄μ£Όλ” μ—­ν• μ΄ ν•„μ”
- μ‚¬μ©λλ” μ½μ΄ μ‚¬μ©ν•λ” μ½μ—κ² μ„λΉ„μ¤λ¥Ό μ κ³µ
- μ„λΉ„μ¤ : μ‚¬μ©λλ” μ¤λΈμ νΈ
- ν΄λΌμ΄μ–ΈνΈ : μ‚¬μ©ν•λ” μ¤λΈμ νΈ
- ν΄λΌμ΄μ–ΈνΈ μ¤λΈμ νΈκ°€ κµ¬ν„ ν΄λμ¤κ°„μ κ΄€κ³„λ¥Ό μ„¤μ •ν•λ„λ΅ ν•λ©΄ λλ‹¤
- ν΄λμ¤ μ‚¬μ΄μ— κ΄€κ³„κ°€ λ§λ“¤μ–΄μ§„λ‹¤ : ν• ν΄λμ¤κ°€ μΈν„°νμ΄μ¤ μ—†μ΄ λ‹¤λ¥Έ ν΄λμ¤λ¥Ό μ§μ ‘ μ‚¬μ©ν•λ‹¤
    - μ½”λ“μ— ν΄λμ¤ μ΄λ¦„μ΄ λ‚νƒ€λ‚λ” μƒν™©
- μ¤λΈμ νΈ μ‚¬μ΄μ— κ΄€κ³„κ°€ λ§λ“¤μ–΄μ§„λ‹¤ : λ°νƒ€μ„ μ‹μ— ν•μ½μ΄ λ‹¤λ¥Έ μ¤λΈμ νΈμ λ νΌλ°μ¤λ¥Ό κ°–κ³  μλ‹¤
    - λ°νƒ€μ„ μ‹μ— μ„λ΅ μ‚¬μ©ν•κ² λ‹¤μ΄λ‚λ―Ήν• κ΄€κ³„λ¥Ό λ§Ίμ–΄μ£Όλ©΄ λ¨
- μ¤λΈμ νΈ μ‚¬μ΄ κ΄€κ³„ μ„¤μ •
    - μ§μ ‘ μƒμ„±μλ¥Ό νΈμ¶ν•μ—¬ μ„¤μ •
    - μ™Έλ¶€μ—μ„ λ§λ“¤μ–΄ μ¤€ κ²ƒ κ°€μ Έμ¤κΈ° (λ©”μ†λ“ νλΌλ―Έν„°, μƒμ„±μ νλΌλ―Έν„° λ“±μΌλ΅ μ „λ‹¬)
    - λ‹¤ν•μ„± ν™μ© : ν΄λμ¤μ μ¤λΈμ νΈλ¥Ό μΈν„°νμ΄μ¤ νƒ€μ…μΌλ΅ λ°›μ•„μ„ μ‚¬μ©
- ν΄λΌμ΄μ–ΈνΈμ μ±…μ„
    - ν΄λμ¤λ“¤μ„ μ΄μ©ν•΄ λ°νƒ€μ„ μ¤λΈμ νΈ κ΄€κ³„λ¥Ό κ°–λ” κµ¬μ΅°λ΅ λ§λ“¤μ–΄μ£Όλ” κ²ƒ
    - λ¨λΈλ§ μ‹μ—λ” μ—†μ—μ§€λ§ λ‹¤μ΄λ‚λ―Ήν•κ² μƒμ„±λ¨
    - ν΄λΌμ΄μ–ΈνΈλ” κµ¬ν„ ν΄λμ¤(μ„Έλ¶€ μ „λµ)λ¥Ό μ„ νƒν•κ³  μ„ νƒν• μ¤λΈμ νΈλ¥Ό μƒμ„±ν•΄ μ‚¬μ©ν•΄μ•Ό ν•  κ³³μ— λμ Έμ¤
        - κΈ°μ΅΄μ—λ” μ‚¬μ©ν•΄μ•Ό ν•  κ³³μ μƒμ„±μμ— μ±…μ„μ΄ μμ—λ‹¤
        - ν™•μ¥μ„±μ΄ λ–¨μ–΄μ§€λ” μƒν™©
    - λ€κ°λ” main λ©”μ†λ“κ°€ ν΄λΌμ΄μ–ΈνΈμ— ν•΄λ‹Ή

μ±…μ„μ„ ν΄λΌμ΄μ–ΈνΈμ— λ– λ„κΈ°κΈ°

```java
public UserDao(ConnectionMaker connectionMaker) {
        this.connectionMaker = connectionMaker;
    }
```

```java
public class UserDaoTest {
    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        DConnectionMaker connectionMaker = new DConnectionMaker();
        UserDao dao = new UserDao(connectionMaker);
    }
}
```

- ν΄λΌμ΄μ–ΈνΈμΈ UserDaoTestκ°€ κµ¬ν„ ν΄λμ¤κ°„μ λ°νƒ€μ„ μ¤λΈμ νΈ μμ΅΄κ΄€κ³„λ¥Ό μ„¤μ •ν•λ” μ±…μ„ λ‹΄λ‹Ή
- UserDaoλ” μμ‹ μ κ΄€μ‹¬μ‚¬λ§ λ³΄λ©΄ λ¨

![λ§ν¬ alt](/assets/img/posts/2023-02-27-TIL_230227.jpg)

<aside>
π’΅ DAOμ λ°μ „ κ³Όμ •β€¦

</aside>

- μµμ΄ DAO
    - UserDaoμ—μ„ DB μ»¤λ„¥μ… μƒμ„±, μμ› λ°ν™, μ‚¬μ©μ κ΄€λ ¨ μ΅°μ‘ λ¨λ‘ μν–‰
    - DB κ΄€λ ¨ μ½”λ“κ°€ λ³€κ²½λλ©΄ UserDaoμ λ¨λ“  λ©”μ†λ“λ¥Ό μ°Ύμ•„μ•Ό ν•¨
- κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬
    - DB μ»¤λ„¥μ… κ°€μ Έμ¤λ” μ¤‘λ³µ μ½”λ“ λ¶„λ¦¬
    - DB κ΄€λ ¨ μ½”λ“κ°€ λ³€κ²½λλ©΄ DB κ΄€λ ¨ λ©”μ†λ“λ§ μμ •ν•λ©΄ λ¨
    - ν• κ°€μ§€ λ°©λ²•μΌλ΅λ©΄ DB μ»¤λ„¥μ… κ°€λ¥
- μƒμ†μ„ ν†µν• ν™•μ¥
    - μ—¬λ¬ λ°©λ²•μΌλ΅ DB μ»¤λ„¥μ…μ„ κ°€μ Έμ¤κ³ ν””
    - UserDaoμ— DB μ»¤λ„¥μ… κ΄€λ ¨ μ¶”μƒ λ©”μ†λ“λ¥Ό μƒμ„±ν•κ³  μ„λΈν΄λμ¤μ—μ„ μƒμ†μ„ λ°›μ•„ μ‚¬μ©
    - μλ°”λ” ν΄λμ¤μ λ‹¤μ¤‘μƒμ†μ„ ν—μ©ν•μ§€ μ•κΈ°μ— ν•κ³„κ°€ μμ
    - μƒμ†μΌλ΅ μ΄λ£¨μ–΄μ§„ κ΄€κ³„λ” λ°€μ ‘ν•¨
- ν΄λμ¤μ λ¶„λ¦¬
    - μƒμ†μ„ ν†µν• κ΄€κ³„κ°€ μ•„λ‹ μ„λ΅ μ‚¬μ©ν•λ” κ΄€κ³„λ΅ λ¶„λ¦¬
    - ν• ν΄λμ¤κ°€ λ‹¤λ¥Έ ν΄λμ¤μ— λ€ν•΄ λ„λ¬΄ λ§μ΄ μ•κ³  μμ–΄μ„ ν™•μ¥μ΄ μ–΄λ ¤μ›μ§
- μΈν„°νμ΄μ¤μ λ„μ…
    - κΈ°λ¥μ—λ§ κ΄€μ‹¬μ„ κ°€μ§€κ³  μ–΄λ–»κ² κµ¬ν„λμ—λ”μ§€λ” κ΄€μ‹¬ κ°€μ§€μ§€ μ•μ
    - μ–΄μ°λμ—λ“  κµ¬μ²΄ ν΄λμ¤λ¥Ό μ°Ύμ•„μ•Ό ν•¨
- κ΄€κ³„μ„¤μ • μ±…μ„μ λ¶„λ¦¬
    - μ¤λΈμ νΈ μ‚¬μ΄μ κ΄€κ³„λ¥Ό ν΄λΌμ΄μ–ΈνΈκ°€ μ„¤μ •ν•λ„λ΅ μ±…μ„μ„ λ– λ„κΉ€